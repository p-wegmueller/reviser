<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generalized Kishor-Koenig Model for Nowcasting — kk_nowcast • reviser</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generalized Kishor-Koenig Model for Nowcasting — kk_nowcast"><meta name="description" content="Implements a generalized Kishor-Koenig (KK) model for nowcasting and
forecasting with state-space models, allowing for multiple vintages of data,
efficient estimation, and Kalman filtering and smoothing."><meta property="og:description" content="Implements a generalized Kishor-Koenig (KK) model for nowcasting and
forecasting with state-space models, allowing for multiple vintages of data,
efficient estimation, and Kalman filtering and smoothing."><meta property="og:image" content="https://p-wegmueller.github.io/reviser/logo.png"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">reviser</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/reviser.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/understanding-revisions.html">Understanding Data Revisions</a></li>
    <li><a class="dropdown-item" href="../articles/revision-analysis.html">Revision Patterns and Statistics</a></li>
    <li><a class="dropdown-item" href="../articles/efficient-release.html">Identifying an Efficient Release in Data Subject to Revisions</a></li>
    <li><a class="dropdown-item" href="../articles/nowcasting-revisions-kk.html">Nowcasting revisions using the generalized Kishor-Koenig model</a></li>
    <li><a class="dropdown-item" href="../articles/nowcasting-revisions-jvn.html">Nowcasting revisions using the Jacobs-Van Norden model</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/p-wegmueller/reviser/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Generalized Kishor-Koenig Model for Nowcasting</h1>
      <small class="dont-index">Source: <a href="https://github.com/p-wegmueller/reviser/blob/main/R/kk.R" class="external-link"><code>R/kk.R</code></a></small>
      <div class="d-none name"><code>kk_nowcast.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Implements a generalized Kishor-Koenig (KK) model for nowcasting and
forecasting with state-space models, allowing for multiple vintages of data,
efficient estimation, and Kalman filtering and smoothing.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">kk_nowcast</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  <span class="va">e</span>,</span>
<span>  h <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  model <span class="op">=</span> <span class="st">"Kishor-Koenig"</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"SUR"</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  solver_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>A data frame containing the time series data in either "long" or
"wide" format.  It must include columns for the time index and the different
release vintages.</p></dd>


<dt id="arg-e">e<a class="anchor" aria-label="anchor" href="#arg-e"></a></dt>
<dd><p>An integer indicating the number of data vintages to include in the
model. Must be greater than 0.</p></dd>


<dt id="arg-h">h<a class="anchor" aria-label="anchor" href="#arg-h"></a></dt>
<dd><p>An integer specifying the forecast horizon. Default is 0, which
implies no forecasts. Must be greater than or equal to 0.</p></dd>


<dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>A string specifying the type of model to use. Options are:</p><ul><li><p>"Kishor-Koenig" or "KK" (default): Full Kishor-Koenig model.</p></li>
<li><p>"Howrey": Howrey's simplified framework.</p></li>
<li><p>"Classical": Classical model without vintage effects.</p></li>
</ul></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>A string specifying the estimation method to use. Options are
"SUR" (default), Maximum likelihood ("MLE") and "OLS".</p></dd>


<dt id="arg-alpha">alpha<a class="anchor" aria-label="anchor" href="#arg-alpha"></a></dt>
<dd><p>Significance level for confidence intervals (default = 0.05).</p></dd>


<dt id="arg-solver-options">solver_options<a class="anchor" aria-label="anchor" href="#arg-solver-options"></a></dt>
<dd><p>An optional list to control the behaviour of the
underlying <code><a href="https://rdrr.io/pkg/systemfit/man/nlsystemfit.html" class="external-link">systemfit::nlsystemfit()</a></code>, <code><a href="https://rdrr.io/r/stats/optim.html" class="external-link">stats::optim()</a></code> and <code><a href="https://rdrr.io/r/stats/nlm.html" class="external-link">stats::nlm()</a></code>
solvers:</p><ul><li><p><strong>trace</strong>: An integer controlling the level of output for the
optimization procedure. Default is 0 (minimal output).</p></li>
<li><p><strong>maxiter</strong>: An integer specifying the maximum number of iterations for
the optimization procedure. Default is 1000.</p></li>
<li><p><strong>startvals</strong>: A list of starting values for the optimization
procedure (must match the number of parameters of the model).</p></li>
<li><p><strong>solvtol</strong>: Tolerance for detecting linear dependencies in the columns of
X in the qr function calls (See <code><a href="https://rdrr.io/pkg/systemfit/man/nlsystemfit.html" class="external-link">systemfit::nlsystemfit()</a></code>).
Default is .Machine$double.eps.</p></li>
<li><p><strong>gradtol</strong>: A a positive scalar giving the tolerance at which the scaled
gradient is considered close enough to zero to terminate the
algorithm (See <code><a href="https://rdrr.io/r/stats/nlm.html" class="external-link">stats::nlm()</a></code>). Default is 1e-6.</p></li>
<li><p><strong>steptol</strong>: A positive scalar providing the minimum allowable relative
step length (See <code><a href="https://rdrr.io/r/stats/nlm.html" class="external-link">stats::nlm()</a></code>). Default is 1e-6.</p></li>
</ul></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with the following components:</p><dl><dt>filtered_z</dt>
<dd><p>A tibble of filtered latent state variables based on
the Kalman filter.</p></dd>

<dt>filtered_y</dt>
<dd><p>A tibble of filtered observed variables based on the
Kalman filter.</p></dd>

<dt>smoothed_z</dt>
<dd><p>A tibble of smoothed latent state variables obtained
using the Kalman smoother.</p></dd>

<dt>smoothed_y</dt>
<dd><p>A tibble of smoothed observed variables obtained using
the Kalman smoother.</p></dd>

<dt>forecast_z</dt>
<dd><p>A tibble of forecasted latent state variables. Returned
only if <code>h &gt; 0</code>.</p></dd>

<dt>forecast_y</dt>
<dd><p>A tibble of forecasted observed variables. Returned
only if <code>h &gt; 0</code>.</p></dd>

<dt>kk_model_mat</dt>
<dd><p>A list of KK model matrices, such as transition
and observation matrices.</p></dd>

<dt>ss_model_mat</dt>
<dd><p>A list of state-space model matrices derived
from the KK model.</p></dd>

<dt>params</dt>
<dd><p>Estimated model parameters, including covariance terms.</p></dd>

<dt>fit</dt>
<dd><p>The fitted model object from the SUR estimation procedure.</p></dd>

<dt>e</dt>
<dd><p>The number of the efficient release (0-indexed).</p></dd>

<dt>data</dt>
<dd><p>The input data in wide format.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function supports multiple models, including the full Kishor-Koenig
framework, Howrey's model, and a classical approach. It handles data
preprocessing, estimation of system equations using Seemingly Unrelated
Regressions (SUR), and application of the Kalman filter. This is
the first openly available implementation of the Kishor-Koenig model (See
the vignette <code>vignette("nowcasting_revisions")</code> for more details).</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Kishor, N. Kundan and Koenig, Evan F., "VAR Estimation and
Forecasting When Data Are Subject to Revision", Journal of Business and
Economic Statistics, 2012.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other revision nowcasting:
<code><a href="jvn_nowcast.html">jvn_nowcast()</a></code>,
<code><a href="plot.jvn_model.html">plot.jvn_model()</a></code>,
<code><a href="plot.kk_model.html">plot.kk_model()</a></code>,
<code><a href="print.jvn_model.html">print.jvn_model()</a></code>,
<code><a href="summary.jvn_model.html">summary.jvn_model()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Example usage:</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_nth_release.html">get_nth_release</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">tsbox</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/tsbox/reference/ts_span.html" class="external-link">ts_span</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu">tsbox</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/tsbox/reference/ts_pc.html" class="external-link">ts_pc</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">reviser</span><span class="fu">::</span><span class="va"><a href="gdp.html">gdp</a></span>, <span class="va">id</span><span class="op">==</span><span class="st">"US"</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="op">)</span>,</span></span>
<span class="r-in"><span>      start <span class="op">=</span> <span class="st">"1980-01-01"</span></span></span>
<span class="r-in"><span>     <span class="op">)</span>,</span></span>
<span class="r-in"><span>     n <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">1</span></span></span>
<span class="r-in"><span>   <span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">df</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">pub_date</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">e</span> <span class="op">&lt;-</span> <span class="fl">1</span>  <span class="co"># Number of efficient release</span></span></span>
<span class="r-in"><span><span class="va">h</span> <span class="op">&lt;-</span> <span class="fl">2</span>  <span class="co"># Forecast horizon</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">kk_nowcast</span><span class="op">(</span><span class="va">df</span>, <span class="va">e</span>, h <span class="op">=</span> <span class="va">h</span>, model <span class="op">=</span> <span class="st">"Kishor-Koenig"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">result</span><span class="op">$</span><span class="va">params</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           F0         G0_0         G0_1           v0         eps0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.200853533  0.995630065 -0.001694615  1.598322193  0.006664367 </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://marcburri.github.io" class="external-link">Marc Burri</a>, <a href="https://p-wegmueller.github.io" class="external-link">Philipp Wegmueller</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

