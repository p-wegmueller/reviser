% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/revisions.R
\name{get_revision_analysis}
\alias{get_revision_analysis}
\title{Revision Analysis Summary Statistics}
\usage{
get_revision_analysis(df, final_release, degree = 1, grouping_var = NULL)
}
\arguments{
\item{df}{A data frame containing the initial data releases. Must include columns:
\itemize{
\item \code{time}: The time variable.
\item \code{value}: The observed values in the initial release.
\item Optionally, \code{release} (release identifier) and \code{id} (grouping variable).
}}

\item{final_release}{A data frame containing the final release data. Must include columns:
\itemize{
\item \code{time}: The time variable (matching the initial release data).
\item \code{value}: The observed values in the final release.
}}

\item{degree}{An integer between 1 and 5 specifying the level of detail for the output:
1: Default, descriptive statistics (bias, min/max, standard deviation, noise/signal ratio, correlation).
2: Efficiency tests (bias intercept and slope tests, efficiency tests for intercept and slope).
3: Orthogonality tests (correlation, autocorrelation, Theil's U statistics, seasonality tests).
4: News vs. noise tests (p-values for news and noise tests).
5: Full set of all statistics and tests.}

\item{grouping_var}{A character string specifying the grouping variable in the data frame. Defaults to
\code{pub_date} or \code{release} if available.}
}
\value{
A data frame with one row per grouping (if applicable) and columns for summary statistics and test results.
The resulting data frame is of class \code{revision_summary}.
}
\description{
Calculates a comprehensive set of summary statistics and hypothesis tests
for revisions between initial and final data releases.
}
\details{
This function performs a variety of statistical analyses to understand the nature of revisions between
the initial and final data releases. The function:
\itemize{
\item Checks the input data for consistency and transforms it as necessary.
\item Merges the initial and final release datasets by their time variable and optional grouping variables (\code{id} or \code{release}).
\item Computes summary statistics such as the mean, standard deviation, and range of the revisions.
\item Performs hypothesis tests for bias, efficiency, and correlation using robust methods (e.g., Newey-West standard errors).
\item Includes tests for seasonality, noise, and news effects.
}

Key tests include:
\itemize{
\item \strong{Bias Tests}: Tests for the presence of mean bias and regression bias.
\item \strong{Efficiency Tests}: Tests whether revisions are orthogonal to initial values.
\item \strong{Autocorrelation and Seasonality}: Tests for serial correlation and seasonal patterns in revisions.
\item \strong{Theil's U Statistics}: Measures predictive accuracy of the initial releases relative to the final values.
\item \strong{Noise vs. News}: Differentiates between unpredictable errors (noise) and systematic adjustments (news).
}

The function supports grouped calculations based on the presence of \code{id} or \code{release} columns in the input.

The following statistics and tests are calculated:
\itemize{
\item \strong{N}: The number of observations in the group.
\item \strong{Frequency}: The inferred data frequency (e.g., 12 for monthly or 4 for quarterly data).
\item \strong{Bias (mean)}: The mean revision, testing whether revisions are systematically biased.
\item \strong{Bias (p-value)}: p-value from a t-test evaluating the significance of the mean revision.
\item \strong{Bias (robust p-value)}: Newey-West HAC robust p-value for the mean revision test.
\item \strong{Bias (intercept)}: Intercept of a regression of final values on initial values, testing for systematic bias.
\item \strong{Bias (intercept p-value)}: p-value for the intercept test.
\item \strong{Bias (slope)}: Slope of the regression of final values on initial values, testing the alignment between them.
\item \strong{Bias (slope p-value)}: p-value for the slope test, with the null hypothesis of slope = 1.
\item \strong{Efficiency (intercept)}: Intercept of the regression of revisions on initial values, testing forecast efficiency.
\item \strong{Efficiency (intercept p-value)}: p-value for the efficiency intercept test.
\item \strong{Efficiency (slope)}: Slope of the regression of revisions on initial values, testing forecast efficiency.
\item \strong{Efficiency (slope p-value)}: p-value for the efficiency slope test, with the null hypothesis of slope = 0.
\item \strong{Minimum}: The minimum revision in the group.
\item \strong{Maximum}: The maximum revision in the group.
\item \strong{Std. Dev.}: The standard deviation of revisions, indicating their variability.
\item \strong{Noise/Signal}: The ratio of the standard deviation of revisions to the standard deviation of final values.
\item \strong{Correlation}: The Pearson correlation between revisions and initial values, testing the relationship.
\item \strong{Correlation (p-value)}: p-value for the significance of the correlation.
\item \strong{Autocorrelation (1st)}: The first-order autocorrelation of revisions, measuring persistence.
\item \strong{Autocorrelation (1st p-value)}: p-value for the first-order autocorrelation test.
\item \strong{Autocorrelation up to 4th (Ljung-Box p-value)}: p-value for the Ljung-Box test for higher-order autocorrelation.
\item \strong{Theil's U1}: A normalized measure of forecast accuracy, comparing the root mean squared error (RMSE) of revisions to the RMSE of final and initial values.
\item \strong{Theil's U2}: A measure comparing forecast changes to actual changes.
\item \strong{Seasonality (Ljung-Box p-value)}: Tests for seasonality in revisions using the Ljung-Box test for lags matching the data frequency.
\item \strong{Seasonality (Friedman p-value)}: Tests for seasonality in revisions using the Friedman test.
\item \strong{News test (p-value)}: Tests whether revisions are explained by information in final values.
\item \strong{Noise test (p-value)}: Tests whether revisions are uncorrelated with initial values.
}
}
\examples{
# Example usage:
df <- get_nth_release(reviser::gdp_us, n = 0:3)

final_release <- get_nth_release(reviser::gdp_us, n = "latest")

results <- get_revision_analysis(df, final_release)
print(results)

}
