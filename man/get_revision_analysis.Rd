% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/revisions.R
\name{get_revision_analysis}
\alias{get_revision_analysis}
\title{Revision Analysis Summary Statistics}
\usage{
get_revision_analysis(df, final_release)
}
\arguments{
\item{df}{A data frame containing the initial data releases. Must include columns:
- `time`: The time variable.
- `value`: The observed values in the initial release.
- Optionally, `release` (release identifier) and `id` (grouping variable).}

\item{final_release}{A data frame containing the final release data. Must include columns:
- `time`: The time variable (matching the initial release data).
- `value`: The observed values in the final release.}
}
\value{
A data frame with one row per grouping (if applicable) and columns for summary statistics and test results. 
The resulting data frame is of class `revision_summary`.
}
\description{
Calculates a comprehensive set of summary statistics and hypothesis tests 
for revisions between initial and final data releases.
}
\details{
This function performs a variety of statistical analyses to understand the nature of revisions between 
the initial and final data releases. The function:
- Checks the input data for consistency and transforms it as necessary.
- Merges the initial and final release datasets by their time variable and optional grouping variables (`id` or `release`).
- Computes summary statistics such as the mean, standard deviation, and range of the revisions.
- Performs hypothesis tests for bias, efficiency, and correlation using robust methods (e.g., Newey-West standard errors).
- Includes tests for seasonality, noise, and news effects.

Key tests include:
- **Bias Tests**: Tests for the presence of mean bias and regression bias.
- **Efficiency Tests**: Tests whether revisions are orthogonal to initial values.
- **Autocorrelation and Seasonality**: Tests for serial correlation and seasonal patterns in revisions.
- **Theil's U Statistics**: Measures predictive accuracy of the initial releases relative to the final values.
- **Noise vs. News**: Differentiates between unpredictable errors (noise) and systematic adjustments (news).

The function supports grouped calculations based on the presence of `id` or `release` columns in the input.

The following statistics and tests are calculated:

- **N**: The number of observations in the group.
- **Frequency**: The inferred data frequency (e.g., 12 for monthly or 4 for quarterly data).
- **Bias (mean)**: The mean revision, testing whether revisions are systematically biased.
- **Bias (p-value)**: p-value from a t-test evaluating the significance of the mean revision.
- **Bias (robust p-value)**: Newey-West HAC robust p-value for the mean revision test.
- **Bias (intercept)**: Intercept of a regression of final values on initial values, testing for systematic bias.
- **Bias (intercept p-value)**: p-value for the intercept test.
- **Bias (slope)**: Slope of the regression of final values on initial values, testing the alignment between them.
- **Bias (slope p-value)**: p-value for the slope test, with the null hypothesis of slope = 1.
- **Efficiency (intercept)**: Intercept of the regression of revisions on initial values, testing forecast efficiency.
- **Efficiency (intercept p-value)**: p-value for the efficiency intercept test.
- **Efficiency (slope)**: Slope of the regression of revisions on initial values, testing forecast efficiency.
- **Efficiency (slope p-value)**: p-value for the efficiency slope test, with the null hypothesis of slope = 0.
- **Minimum**: The minimum revision in the group.
- **Maximum**: The maximum revision in the group.
- **Std. Dev.**: The standard deviation of revisions, indicating their variability.
- **Noise/Signal**: The ratio of the standard deviation of revisions to the standard deviation of final values.
- **Correlation**: The Pearson correlation between revisions and initial values, testing the relationship.
- **Correlation (p-value)**: p-value for the significance of the correlation.
- **Autocorrelation (1st)**: The first-order autocorrelation of revisions, measuring persistence.
- **Autocorrelation (1st p-value)**: p-value for the first-order autocorrelation test.
- **Autocorrelation up to 4th (Ljung-Box p-value)**: p-value for the Ljung-Box test for higher-order autocorrelation.
- **Theil's U1**: A normalized measure of forecast accuracy, comparing the root mean squared error (RMSE) of revisions to the RMSE of final and initial values.
- **Theil's U2**: A measure comparing forecast changes to actual changes.
- **Seasonality (Ljung-Box p-value)**: Tests for seasonality in revisions using the Ljung-Box test for lags matching the data frequency.
- **Seasonality (Friedman p-value)**: Tests for seasonality in revisions using the Friedman test.
- **News test (p-value)**: Tests whether revisions are explained by information in final values.
- **Noise test (p-value)**: Tests whether revisions are uncorrelated with initial values.
}
\examples{
# Example usage:
df <- get_nth_release(reviser::gdp, n = 0:3)

final_release <- get_nth_release(reviser::gdp, n = "latest")

results <- get_revision_analysis(df, final_release)
print(results)

}
